@name: "contains 和 not_contains 操作符测试"
@description: "测试 contains 和 not_contains 操作符的各种场景"

# ============================================
# 测试数据准备
# ============================================
rule = "aabbccdd1122334455"
new_rule_id = 55
rule_id_str = "11223344"
rule_id_int = 11223344

# 测试字符串变量
test_string = "Hello World pytest-dsl"
test_number = 42
test_float = 3.14

# 测试列表
test_list = [1, 2, 3, 4, 5, "hello", "world"]

# ============================================
# 1. 字符串 contains 字符串（应该通过）
# ============================================
[打印], 内容: "=== 测试1: 字符串 contains 字符串 ==="
[断言], 条件: "${test_string} contains Hello", 消息: "字符串应包含 'Hello'"
[断言], 条件: "${test_string} contains World", 消息: "字符串应包含 'World'"
[断言], 条件: "${test_string} contains pytest-dsl", 消息: "字符串应包含 'pytest-dsl'"
[打印], 内容: "✓ 测试1通过"

# ============================================
# 2. 字符串 contains 数字（整数）- 需要转换为字符串
# ============================================
[打印], 内容: "=== 测试2: 字符串 contains 整数 ==="
# 直接使用整数变量
[断言], 条件: "${rule} contains ${new_rule_id}", 消息: "字符串应包含整数ID ${new_rule_id}"
# 使用字符串变量
[断言], 条件: "${rule} contains ${rule_id_str}", 消息: "字符串应包含字符串ID ${rule_id_str}"
[打印], 内容: "✓ 测试2通过"

# ============================================
# 3. 字符串 contains 数字（通过转换为字符串）
# ============================================
[打印], 内容: "=== 测试3: 字符串 contains 数字（转换后） ==="
# 先转换为字符串
convert_num = [转换为字符串], 值: ${new_rule_id}
[断言], 条件: "${rule} contains ${convert_num}", 消息: "字符串应包含转换后的ID ${convert_num}"
[打印], 内容: "✓ 测试3通过"

# ============================================
# 4. 字符串 not_contains 字符串（应该通过）
# ============================================
[打印], 内容: "=== 测试4: 字符串 not_contains 字符串 ==="
[断言], 条件: "${test_string} not_contains Goodbye", 消息: "字符串不应包含 'Goodbye'"
[断言], 条件: "${test_string} not_contains Python", 消息: "字符串不应包含 'Python'"
[打印], 内容: "✓ 测试4通过"

# ============================================
# 5. 字符串 not_contains 数字（整数）
# ============================================
[打印], 内容: "=== 测试5: 字符串 not_contains 整数 ==="
# 测试不存在的数字
not_exist_id = 99
[断言], 条件: "${rule} not_contains ${not_exist_id}", 消息: "字符串不应包含不存在的ID ${not_exist_id}"
[打印], 内容: "✓ 测试5通过"

# ============================================
# 6. 列表 contains 元素（应该通过）
# ============================================
[打印], 内容: "=== 测试6: 列表 contains 元素 ==="
[断言], 条件: "${test_list} contains 3", 消息: "列表应包含数字 3"
[断言], 条件: "${test_list} contains hello", 消息: "列表应包含字符串 'hello'"
[断言], 条件: "${test_list} contains world", 消息: "列表应包含字符串 'world'"
[打印], 内容: "✓ 测试6通过"

# ============================================
# 7. 列表 not_contains 元素（应该通过）
# ============================================
[打印], 内容: "=== 测试7: 列表 not_contains 元素 ==="
[断言], 条件: "${test_list} not_contains 99", 消息: "列表不应包含数字 99"
[断言], 条件: "${test_list} not_contains goodbye", 消息: "列表不应包含字符串 'goodbye'"
[打印], 内容: "✓ 测试7通过"

# ============================================
# 8. 数字转换为字符串后的 contains 测试
# ============================================
[打印], 内容: "=== 测试8: 数字转换为字符串后的 contains ==="
# 测试整数
num_to_str = [转换为字符串], 值: ${test_number}
[断言], 条件: "The answer is ${num_to_str} contains ${num_to_str}", 消息: "字符串应包含转换后的数字 ${num_to_str}"

# 测试浮点数
float_to_str = [转换为字符串], 值: ${test_float}
pi_string = "The value of pi is approximately 3.14"
[断言], 条件: "${pi_string} contains ${float_to_str}", 消息: "字符串应包含转换后的浮点数 ${float_to_str}"
[打印], 内容: "✓ 测试8通过"

# ============================================
# 9. 边界情况测试
# ============================================
[打印], 内容: "=== 测试9: 边界情况 ==="
# 空字符串
empty_str = ""
[断言], 条件: "${empty_str} contains ${empty_str}", 消息: "空字符串应包含空字符串"

# 单个字符
single_char = "H"
[断言], 条件: "${test_string} contains ${single_char}", 消息: "字符串应包含单个字符 'H'"
[打印], 内容: "✓ 测试9通过"

# ============================================
# 10. 复杂场景：数字ID在字符串中的查找
# ============================================
[打印], 内容: "=== 测试10: 数字ID在字符串中的查找 ==="
# 场景：在配置字符串中查找ID
config_string = "user_ids: 11,22,33,44,55,66,77,88"
target_id = 55
target_id_str = [转换为字符串], 值: ${target_id}

[断言], 条件: "${config_string} contains ${target_id_str}", 消息: "配置字符串应包含ID ${target_id_str}"
[断言], 条件: "${config_string} not_contains 99", 消息: "配置字符串不应包含不存在的ID 99"
[打印], 内容: "✓ 测试10通过"

# ============================================
# 11. 混合类型测试
# ============================================
[打印], 内容: "=== 测试11: 混合类型测试 ==="
# 字符串中包含数字字符串
mixed_string = "Order ID: 12345, Status: active"
order_id = 12345
order_id_str = [转换为字符串], 值: ${order_id}

[断言], 条件: "${mixed_string} contains ${order_id_str}", 消息: "混合字符串应包含订单ID ${order_id_str}"
[断言], 条件: "${mixed_string} contains active", 消息: "混合字符串应包含 'active'"
[断言], 条件: "${mixed_string} not_contains inactive", 消息: "混合字符串不应包含 'inactive'"
[打印], 内容: "✓ 测试11通过"

# ============================================
# 测试总结
# ============================================
[打印], 内容: "=== 所有 contains 和 not_contains 测试完成 ==="
[打印], 内容: "✓ 测试覆盖了字符串、数字、列表、边界情况等多种场景"
