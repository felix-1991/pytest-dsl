@name: "默认值功能演示"
@description: "展示pytest-dsl关键字默认值功能的使用方法"

# 测试1：使用默认值生成随机数
[打印], 内容: "=== 测试1：生成随机数（使用默认值）==="

# 不传递任何参数，使用默认值：最小值=0, 最大值=100, 小数位数=0
default_random = [生成随机数]
[打印], 内容: "使用默认值生成的随机数: ${default_random}"

# 只传递部分参数，其他使用默认值
partial_random = [生成随机数], 最大值: 50
[打印], 内容: "最大值为50的随机数: ${partial_random}"

# 传递所有参数
full_random = [生成随机数], 最小值: 10, 最大值: 20, 小数位数: 2
[打印], 内容: "完整参数的随机数: ${full_random}"

# 测试2：使用默认值生成随机字符串
[打印], 内容: "=== 测试2：生成随机字符串（使用默认值）==="

# 使用默认值：长度=8, 类型=alphanumeric
default_string = [生成随机字符串]
[打印], 内容: "使用默认值生成的字符串: ${default_string}"

# 只指定长度，类型使用默认值
length_only_string = [生成随机字符串], 长度: 12
[打印], 内容: "长度为12的字符串: ${length_only_string}"

# 只指定类型，长度使用默认值
type_only_string = [生成随机字符串], 类型: "letters"
[打印], 内容: "只包含字母的字符串: ${type_only_string}"

# 测试3：使用默认值记录日志
[打印], 内容: "=== 测试3：记录日志（使用默认值）==="

# 使用默认级别INFO
[日志], 消息: "这是一条使用默认级别的日志"

# 指定级别
[日志], 级别: "WARNING", 消息: "这是一条警告日志"

# 测试4：获取当前时间（新的默认值）
[打印], 内容: "=== 测试4：获取当前时间（实用的默认值）==="

# 使用默认值，返回时间戳
timestamp = [获取当前时间]
[打印], 内容: "当前时间戳: ${timestamp}"

# 使用默认时区，指定格式
formatted_time = [获取当前时间], 格式: "%Y-%m-%d %H:%M:%S"
[打印], 内容: "北京时间: ${formatted_time}"

# 使用本地时区
local_time = [获取当前时间], 格式: "%Y-%m-%d %H:%M:%S", 时区: "local"
[打印], 内容: "本地时间: ${local_time}"

# 测试5：字符串操作（新的默认值）
[打印], 内容: "=== 测试5：字符串操作（实用的默认值）==="

# 使用默认操作strip
cleaned_string = [字符串操作], 字符串: "  hello world  "
[打印], 内容: "默认去空格操作: '${cleaned_string}'"

# 使用默认分隔符分割
split_result = [字符串操作], 操作: "split", 字符串: "apple orange banana"
[打印], 内容: "默认空格分割: ${split_result}"

# 指定分隔符分割
custom_split = [字符串操作], 操作: "split", 字符串: "a,b,c", 参数1: ","
[打印], 内容: "逗号分割: ${custom_split}"

# 测试6：等待（新的默认值）
[打印], 内容: "=== 测试6：等待功能（实用的默认值）==="

[打印], 内容: "开始等待..."
# 使用默认等待时间1秒
[等待]
[打印], 内容: "默认等待1秒完成"

# 自定义等待时间
[等待], 秒数: 0.5
[打印], 内容: "自定义等待0.5秒完成"

# 测试7：验证默认值确实生效
[打印], 内容: "=== 测试7：验证默认值功能 ==="

# 多次生成随机数，验证范围
for i in range(1, 4) do
    random_num = [生成随机数]
    [断言], 条件: "${random_num} >= 0", 消息: "随机数应该大于等于默认最小值0"
    [断言], 条件: "${random_num} <= 100", 消息: "随机数应该小于等于默认最大值100"
    [打印], 内容: "第${i}次生成的随机数: ${random_num} (在默认范围内)"
end

# 测试8：组合使用默认值
[打印], 内容: "=== 测试8：组合使用默认值 ==="

# 生成一个随机用户名
username_prefix = [生成随机字符串], 长度: 6, 类型: "letters"
username_suffix = [生成随机数], 最小值: 100, 最大值: 999

# 组合并清理
full_username = [字符串操作], 操作: "concat", 字符串: "user_${username_prefix}", 参数1: "${username_suffix}"
clean_username = [字符串操作], 字符串: " ${full_username} "  # 故意加空格测试默认strip
[打印], 内容: "生成的用户名: '${clean_username}'"

# 记录操作日志
[日志], 消息: "用户名生成完成: ${clean_username}"

teardown do
    [打印], 内容: "默认值功能演示完成！"
    [打印], 内容: "主要改进："
    [打印], 内容: "- 时区默认值从None改为Asia/Shanghai"
    [打印], 内容: "- 时间格式默认值从None改为timestamp"
    [打印], 内容: "- 字符串操作增加了合理的默认值"
    [打印], 内容: "- 等待时间默认值为1秒"
    [打印], 内容: "- 所有默认值都是DSL可识别的具体值"
end 